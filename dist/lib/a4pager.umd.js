!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).A4Pager={})}(this,(function(e){"use strict";function t(e){var t=document.querySelector(e);return t||(console.error(" ".concat(e," is an invalid container ")),null)}function n(){return document.createElement("div")}var r=1123,o="WHITE_SPACE";function a(e){var t=getComputedStyle(e);return e.clientHeight+(+t.getPropertyValue("margin-top").slice(0,-2)+ +t.getPropertyValue("margin-bottom").slice(0,-2))}function i(e,t){for(var n=e.offsetTop,r=e.offsetParent;r!==t;)n+=r.offsetTop,r=r.offsetParent;return n}function l(e){u(e),c(e);for(var t=0,o=0,a=e.clientHeight,i=[];a-o>0;){var l=n(),p=e.cloneNode(!0);l.classList.add("page-wrapper");var d=Math.min(a-o,r),s=n();s.classList.add("page-wrapper-item"),s.style.height=d+"px",p.style.position="absolute",p.style.top=-t*r+"px",p.style.left="0px",s.appendChild(p),l.appendChild(s),o+=r,t++,i.push(l)}return i}function u(e){for(var t=0,n=Array.from(e.children);t<n.length;t++){var r=n[t];r.getAttribute(o)?e.removeChild(r):u(r)}}function p(e){var t=n();return t.setAttribute(o,"true"),t.style.height=e+"px",t}function c(e){var t=+getComputedStyle(e).getPropertyValue("padding-top").slice(0,-2),n=+getComputedStyle(e).getPropertyValue("padding-bottom").slice(0,-2);console.log(t,n);for(var o={value:1},l=0,u=Array.from(e.children);l<u.length;l++){var c=u[l],s=a(c),f=i(c,e);f+s>r*o.value-n&&(c.children.length?d(c,e,t,n,o):(e.insertBefore(p(r*o.value-f+t),c),++o.value))}return e}function d(e,t,n,o,l){for(var u=0,c=Array.from(e.children);u<c.length;u++){var s=c[u],f=a(s),h=i(s,t);h+f>r*l.value-o&&(s.children.length&&!["p","li"].includes(s.tagName.toLocaleLowerCase())?d(s,t,n,o,l):(e.insertBefore(p(r*l.value-h+n),s),l.value++))}}function s(e,t){if(!document.head.querySelector("style[A4View]")){var n=document.createElement("style");n.setAttribute("A4View","true"),n.textContent=":root {\n    --A4_width: 794px;\n    --A4_height: 1123px;\n  }\n  .page-wrapper {\n    height: var(--A4_height);\n    width: var(--A4_width);\n    margin-bottom: ".concat(t,"px;\n    background: ").concat(e,";\n    position: relative;\n  }\n\n  .page-wrapper-item {\n    width: var(--A4_width);\n    overflow: hidden;\n    position: relative;\n    background: ").concat(e,";\n  }"),document.head.appendChild(n)}}var f=function(){function e(e){if("string"==typeof e.target){var n=t(e.target);if(!n)return;this.targetContainer=n}else this.targetContainer=e.target;this.setBackground(e.background||"white"),this.setA4Gap(e.pageGap||10),s(this.background,this.pageGap)}return e.prototype.render=function(e){var n=t(e);if(n){n.innerHTML="",this.previewContainer=n;for(var r=0,o=l(this.targetContainer);r<o.length;r++){var a=o[r];n.appendChild(a)}}},e.prototype.setBackground=function(e){this.background=e},e.prototype.setA4Gap=function(e){this.pageGap=e},e.prototype.root=function(){return this.targetContainer},e}();e.default=f,e.handlerWhiteBoundary=c,e.splitPage=l,Object.defineProperty(e,"__esModule",{value:!0})}));
