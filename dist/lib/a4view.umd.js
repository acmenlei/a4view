!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).A4View={})}(this,(function(e){"use strict";function t(e){var t=document.querySelector(e);return t||(console.error(" ".concat(e," is an invalid container ")),null)}function n(){return document.createElement("div")}var r=1123,o="WHITE_SPACE";function i(e){var t=getComputedStyle(e);return e.clientHeight+(+t.getPropertyValue("margin-top").slice(0,-2)+ +t.getPropertyValue("margin-bottom").slice(0,-2))}function a(e,t){for(var n=e.offsetTop,r=e.offsetParent;r!==t;)n+=r.offsetTop,r=r.offsetParent;return n}function l(e){p(e),s(e);for(var t=0,o=0,i=e.clientHeight,a=[];i-o>0;){var l=n(),u=e.cloneNode(!0);l.classList.add("page-wrapper");var c=Math.min(i-o,r),d=n();d.classList.add("page-wrapper-item"),d.style.height=c+"px",u.style.position="absolute",u.style.top=-t*r+"px",u.style.left="0px",d.appendChild(u),l.appendChild(d),o+=r,t++,a.push(l)}return a}function p(e){for(var t=0,n=Array.from(e.children);t<n.length;t++){var r=n[t];r.getAttribute(o)?e.removeChild(r):p(r)}}function u(e){var t=n();return t.setAttribute(o,"true"),t.style.height=e+"px",t}function s(e){var t=+getComputedStyle(e).getPropertyValue("padding-top").slice(0,-2),n=+getComputedStyle(e).getPropertyValue("padding-bottom").slice(0,-2);console.log(t,n);for(var o={value:1},l=0,p=Array.from(e.children);l<p.length;l++){var s=p[l],d=i(s),f=a(s,e);f+d>r*o.value-n&&(s.children.length?c(s,e,t,n,o):(e.insertBefore(u(r*o.value-f+t),s),++o.value))}return e}function c(e,t,n,o,l){for(var p=0,s=Array.from(e.children);p<s.length;p++){var d=s[p],f=i(d),h=a(d,t);h+f>r*l.value-o&&(d.children.length&&!["p","li"].includes(d.tagName.toLocaleLowerCase())?c(d,t,n,o,l):(e.insertBefore(u(r*l.value-h+n),d),l.value++))}}function d(e,t){if(!document.head.querySelector("style[A4View]")){var n=document.createElement("style");n.setAttribute("A4View","true"),n.textContent=":root {\n    --A4_width: 794px;\n    --A4_height: 1123px;\n  }\n  .page-wrapper {\n    height: var(--A4_height);\n    width: var(--A4_width);\n    margin-bottom: ".concat(t,"px;\n    background: ").concat(e,";\n    position: relative;\n  }\n\n  .page-wrapper-item {\n    width: var(--A4_width);\n    overflow: hidden;\n    position: relative;\n    background: ").concat(e,";\n  }"),document.head.appendChild(n)}}var f=function(){function e(e){if("string"==typeof e.target){var n=t(e.target);if(!n)return;this.targetContainer=n}else this.targetContainer=e.target;this.setBackground(e.background||"white"),this.setA4Gap(e.pageGap||10),this.targetContainer.style.position="relative",d(this.background,this.pageGap)}return e.prototype.render=function(e){var n=t(e);if(n){n.innerHTML="",this.previewContainer=n;for(var r=0,o=l(this.targetContainer);r<o.length;r++){var i=o[r];n.appendChild(i)}}},e.prototype.setBackground=function(e){this.background=e},e.prototype.setA4Gap=function(e){this.pageGap=e},e.prototype.root=function(){return this.targetContainer},e}();e.default=f,e.handlerWhiteBoundary=s,e.splitPage=l,Object.defineProperty(e,"__esModule",{value:!0})}));
